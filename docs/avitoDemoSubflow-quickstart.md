# üöÄ Quick Start: Avito Demo Subflow

## –ß—Ç–æ —ç—Ç–æ?

–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∏–π —Ä–∞–±–æ—Ç—É **Subflow** ‚Äî –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –±–ª–æ–∫–æ–≤ workflow.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –§–∞–π–ª—ã –≥–æ—Ç–æ–≤—ã ‚úÖ

- ‚úÖ `avitoDemoSubflow.json` - workflow —Å subflow
- ‚úÖ `avitoDemoSubflowProduct.js` - —ç–∫—Å–ø–æ—Ä—Ç –ø—Ä–æ–¥—É–∫—Ç–∞
- ‚úÖ `demoProduct.js` - –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –Ω–æ–≤—ã–π –ø—Ä–æ–¥—É–∫—Ç
- ‚úÖ `SandboxPage.jsx` - –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–π –ø—Ä–æ–¥—É–∫—Ç

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```bash
npm run dev
```

### 3. –û—Ç–∫—Ä–æ–π—Ç–µ Sandbox

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É `/sandbox` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –Ω–æ–≤—ã–π –ø—Ä–æ–¥—É–∫—Ç!

## –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: "–ó–∞–≤–µ—Ä—à–∏—Ç—å –æ–Ω–±–æ—Ä–¥–∏–Ω–≥"

```
1. –≠–∫—Ä–∞–Ω "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å" 
   ‚Üí –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å"
   
2. –≠–∫—Ä–∞–Ω "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è"
   ‚Üí –ö–Ω–æ–ø–∫–∞ "–ó–∞–≤–µ—Ä—à–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É"
   
3. –†–µ–∑—É–ª—å—Ç–∞—Ç subflow:
   - onboarding_result.completed = true
   - user_name = "–û–ø—ã—Ç–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"
   
4. –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã
   
5. –≠–∫—Ä–∞–Ω –∫–æ—Ä–∑–∏–Ω—ã
   - –ó–∞–≥–æ–ª–æ–≤–æ–∫: "–ö–æ—Ä–∑–∏–Ω–∞ ‚Äî –û–ø—ã—Ç–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å" ‚ú®
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –æ–Ω–±–æ—Ä–¥–∏–Ω–≥"

```
1. –≠–∫—Ä–∞–Ω "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å"
   ‚Üí –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å"
   
2. –≠–∫—Ä–∞–Ω "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è"
   ‚Üí –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å"
   
3. –†–µ–∑—É–ª—å—Ç–∞—Ç subflow:
   - onboarding_result.completed = false
   - user_name = "–ì–æ—Å—Ç—å"
   
4. –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã
   
5. –≠–∫—Ä–∞–Ω –∫–æ—Ä–∑–∏–Ω—ã
   - –ó–∞–≥–æ–ª–æ–≤–æ–∫: "–ö–æ—Ä–∑–∏–Ω–∞ ‚Äî –ì–æ—Å—Ç—å" ‚ú®
```

## –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### üîÑ Input Mapping
```javascript
// –î–∞–Ω–Ω—ã–µ –ò–ó —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –í subflow:
"user_id": "cart_response.user_id"
"store_name": "store.name"
```

### üì§ Output Mapping
```javascript
// –î–∞–Ω–Ω—ã–µ –ò–ó subflow –í —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç:
"completed": "onboarding_result.completed"
"user_preferences": "user_name"
```

### üìã Dependent Variables
```javascript
// –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å:
["cart_response", "store"]
```

## –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤

–†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `/src/pages/Sandbox/data/demoProduct.js`:

```javascript
// –¢–µ–∫—É—â–∏–π –ø—Ä–æ–¥—É–∫—Ç (—Å subflow)
import avitoDemoSubflow from './avitoDemoSubflow.json';
export const demoProduct = avitoDemoSubflow;

// –ò–ª–∏ –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º—É:
// import avitoDemo from './avitoDemo.json';
// export const demoProduct = avitoDemo;
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Subflow

```json
{
  "subflows": {
    "onboarding-flow": {
      "id": "onboarding-flow",
      "name": "–û–Ω–±–æ—Ä–¥–∏–Ω–≥",
      "input_variables": ["user_id", "store_name"],
      "output_variables": ["completed", "user_preferences"],
      "nodes": [
        { "id": "onboarding-screen-1", ... },
        { "id": "onboarding-screen-2", ... }
      ],
      "screens": { ... }
    }
  }
}
```

## –í—ã–∑–æ–≤ Subflow

```json
{
  "id": "onboarding-subflow",
  "type": "subflow",
  "state_type": "subflow",
  "expressions": [{
    "variable": "onboarding_result",
    "subflow_workflow_id": "onboarding-flow",
    "input_mapping": { ... },
    "output_mapping": { ... }
  }],
  "transitions": [
    { "variable": "onboarding_result", "state_id": "next-state" }
  ]
}
```

## Debug Context

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞–Ω–µ–ª—å "–ö–æ–Ω—Ç–µ–∫—Å—Ç" –≤ Sandbox –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:

- ‚úÖ `user_name` - –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ subflow
- ‚úÖ `onboarding_result` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- ‚úÖ `onboarding_error` - –æ—à–∏–±–∫–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

üìñ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `/docs/avitoDemoSubflow-product.md`

üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
- –û–Ω–±–æ—Ä–¥–∏–Ω–≥
- –°—Ç—Ä–∞—Ö–æ–≤–∫–∞ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ
- –í—ã–±–æ—Ä –¥–æ—Å—Ç–∞–≤–∫–∏
- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∞–∫—Å–µ—Å—Å—É–∞—Ä–æ–≤
- KYC-–ø—Ä–æ–≤–µ—Ä–∫–∞

üõ† –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π subflow:
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–∑ `subflows`
2. –°–æ–∑–¥–∞–π—Ç–µ —ç–∫—Ä–∞–Ω—ã
3. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ input/output mapping
4. –í—ã–∑–æ–≤–∏—Ç–µ –∏–∑ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ workflow

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ
