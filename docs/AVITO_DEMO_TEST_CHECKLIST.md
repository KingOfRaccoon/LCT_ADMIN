# –ß–µ–∫–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è avitoDemo

## üìã –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ (`npm run dev`)
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- [ ] –ë—Ä–∞—É–∑–µ—Ä –æ—Ç–∫—Ä—ã—Ç –Ω–∞ `http://localhost:5174`

## üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ UI

### 1. –°–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- [ ] –û—Ç–∫—Ä—ã—Ç—å `/products`
- [ ] –ù–∞–π—Ç–∏ –∫–∞—Ä—Ç–æ—á–∫—É "–ê–≤–∏—Ç–æ ‚Äî –ö–æ—Ä–∑–∏–Ω–∞"
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:
  - [ ] –ù–∞–∑–≤–∞–Ω–∏–µ: "–ê–≤–∏—Ç–æ ‚Äî –ö–æ—Ä–∑–∏–Ω–∞"
  - [ ] –û–ø–∏—Å–∞–Ω–∏–µ: "–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –∫–æ—Ä–∑–∏–Ω—ã Avito..."
  - [ ] –≠–∫—Ä–∞–Ω—ã: 11
  - [ ] –î–µ–π—Å—Ç–≤–∏—è: 25
  - [ ] –°—Ç–∞—Ç—É—Å: active

### 2. –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–∞
- [ ] –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ "–ê–≤–∏—Ç–æ ‚Äî –ö–æ—Ä–∑–∏–Ω–∞"
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å URL: `/products/avito-cart-demo`
- [ ] –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≥—Ä—É–∑–∫–∏ (–ø–æ—è–≤–∏—Ç—Å—è toast "avitoDemo loaded successfully!")
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏

### 3. –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫: "–ê–≤–∏—Ç–æ ‚Äî –ö–æ—Ä–∑–∏–Ω–∞"
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é: "v1.0.0"
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å permissions: ['admin', 'viewer']
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å integrations: ['avito-api']

### 4. –°–ø–∏—Å–æ–∫ —ç–∫—Ä–∞–Ω–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è 11 —ç–∫—Ä–∞–Ω–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è —ç–∫—Ä–∞–Ω–æ–≤ (–ó–∞–≥—Ä—É–∑–∫–∞, –ö–æ—Ä–∑–∏–Ω–∞ ‚Äî –û—Å–Ω–æ–≤–Ω–æ–π —ç–∫—Ä–∞–Ω, –∏ —Ç.–¥.)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–µ–π—Å—Ç–≤–∏–π
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å: complete

### 5. –ì—Ä–∞—Ñ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
- [ ] –ö–ª–∏–∫–Ω—É—Ç—å "View Workflow Graph"
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å URL: `/products/avito-cart-demo/screens/start/editor`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ React Flow
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–∑–ª–æ–≤: 11
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä—ë–±–µ—Ä: ~25

## üîÑ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Workflow Export

### 6. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —ç–∫—Å–ø–æ—Ä—Ç—É
- [ ] –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ `/products/avito-cart-demo`
- [ ] –ù–∞–π—Ç–∏ –∫–Ω–æ–ø–∫—É "Export Workflow" –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–Ω–æ–ø–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞ (–Ω–µ disabled)

### 7. –≠–∫—Å–ø–æ—Ä—Ç –≤ Mock Mode
- [ ] –û—Ç–∫—Ä—ã—Ç—å DevTools (F12)
- [ ] –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É Network
- [ ] –ö–ª–∏–∫–Ω—É—Ç—å "Export Workflow"
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—è–≤–ª–µ–Ω–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞/toast
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏ –ª–æ–≥–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö:
  ```javascript
  {
    workflow_name: "–ê–≤–∏—Ç–æ ‚Äî –ö–æ—Ä–∑–∏–Ω–∞",
    states: [
      {
        name: "–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã",
        transitions: [...]
      },
      ...
    ]
  }
  ```

### 8. –≠–∫—Å–ø–æ—Ä—Ç –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å Workflow Server: `cd workflow-server && uvicorn main:app --reload`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://127.0.0.1:8000
- [ ] –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç—å:
  ```javascript
  localStorage.setItem('workflowServerUrl', 'http://127.0.0.1:8000');
  ```
- [ ] –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
- [ ] –ö–ª–∏–∫–Ω—É—Ç—å "Export Workflow"
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Network request –Ω–∞ `/api/workflows`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞: 200 OK
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–ª–æ –æ—Ç–≤–µ—Ç–∞

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

### 9. –ü—Ä–æ–≤–µ—Ä–∫–∞ graphData –≤ VirtualContext
–û—Ç–∫—Ä—ã—Ç—å React DevTools:
- [ ] –ù–∞–π—Ç–∏ VirtualContextProvider
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `graphData.nodes`:
  - [ ] –î–ª–∏–Ω–∞: 11
  - [ ] –ü–µ—Ä–≤—ã–π —É–∑–µ–ª: id="loading", label="–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã"
  - [ ] –ù–∞–ª–∏—á–∏–µ position {x, y}
  - [ ] –ù–∞–ª–∏—á–∏–µ data.screenId
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `graphData.edges`:
  - [ ] –î–ª–∏–Ω–∞: ~25
  - [ ] –ù–∞–ª–∏—á–∏–µ source, target
  - [ ] –ù–∞–ª–∏—á–∏–µ data.event, data.contextPatch

### 10. –ü—Ä–æ–≤–µ—Ä–∫–∞ variableSchemas
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ `variableSchemas` –≤ VirtualContext
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Å—Ö–µ–º:
  - [ ] cart (type: object)
  - [ ] stores (type: array)
  - [ ] recommendations (type: array)
  - [ ] ui (type: object)
  - [ ] state (type: object)

### 11. –ü—Ä–æ–≤–µ—Ä–∫–∞ screens
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `productScreens` –≤ ProductOverview state
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–≤—ã–π —ç–∫—Ä–∞–Ω:
  - [ ] id: "screen-loading"
  - [ ] name: "–ó–∞–≥—Ä—É–∑–∫–∞"
  - [ ] type: "screen"
  - [ ] components: > 0
  - [ ] actions: > 0
  - [ ] status: "complete"

## üêõ –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫

### 12. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏
- [ ] –í—Ä–µ–º–µ–Ω–Ω–æ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å `avitoDemo.json`
- [ ] –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–æ–¥—É–∫—Ç–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—è–≤–ª–µ–Ω–∏–µ toast —Å –æ—à–∏–±–∫–æ–π
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å fallback –Ω–∞ –ø—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫—Ä–∞—à –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- [ ] –í–µ—Ä–Ω—É—Ç—å —Ñ–∞–π–ª –Ω–∞ –º–µ—Å—Ç–æ

### 13. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Å–æ–ª–∏
- [ ] –û—Ç–∫—Ä—ã—Ç—å Console –≤ DevTools
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–æ–∫ (errors)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π (warnings)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö –ª–æ–≥–æ–≤:
  - [ ] "avitoDemo loaded successfully!"
  - [ ] –õ–æ–≥–∏ –∏–∑ useWorkflowApi (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä)

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –£—Å–ø–µ—à–Ω–æ –ø—Ä–æ–π–¥–µ–Ω–æ: __ / 50

### –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. 
2. 
3. 

### –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:
- 
- 
- 

---

## üîß Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: avitoDemo –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞ `src/pages/Sandbox/data/avitoDemo.json`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç JSON (–≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å)

### –ü—Ä–æ–±–ª–µ–º–∞: –ü—É—Å—Ç–æ–π –≥—Ä–∞—Ñ
**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä—ã—Ç—å React DevTools
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å VirtualContext.graphData
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—ã–∑–æ–≤ setGraphData –≤ ProductOverview

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —É–∑–ª–æ–≤ –≤ graphData
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö (name, state_id)
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å WORKFLOW_CONTRACT_FIX.md

### –ü—Ä–æ–±–ª–µ–º–∞: 422 –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `name` (–Ω–µ `state_name`)
3. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `state_id` (–Ω–µ `target_state_name`)
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å WORKFLOW_FINAL_CONTRACT_FIX.md
