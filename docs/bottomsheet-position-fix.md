# ๐ง ะัะฟัะฐะฒะปะตะฝะธะต ะฟะพะทะธัะธะพะฝะธัะพะฒะฐะฝะธั Bottom Sheet

## ะัะพะฑะปะตะผั

1. โ **Bottom Sheet ะพัะพะฑัะฐะถะฐะปัั ัะฒะตััั ัะบัะฐะฝะฐ** ะฒะผะตััะพ ัะฝะธะทั
2. โ **Bottom Sheet ะฑัะป ะฒะธะดะตะฝ ะฟะพ ัะผะพะปัะฐะฝะธั** ะฟัะธ ะทะฐะณััะทะบะต ัััะฐะฝะธัั (ะฝะตัะผะพััั ะฝะฐ `show_edit_recipient: false`)

## ะัะธัะธะฝั

### ะัะพะฑะปะตะผะฐ #1: ะะตะฟัะฐะฒะธะปัะฝะพะต ะฟะพะทะธัะธะพะฝะธัะพะฒะฐะฝะธะต
```css
/* ะะซะะ: */
.sandbox-section[data-slot="overlay"] {
  position: absolute !important;  /* relative ะบ .sandbox-screen */
  top: 0 !important;
  /* ... */
}
```

```json
// ะ avitoDemo.json ัะฐะบะถะต ะฑัะปะธ ะดัะฑะปะธััััะธะต ััะธะปะธ:
"style": {
  "position": "absolute",
  "top": "0",
  "bottom": "0",
  /* ... */
}
```

**ะัะพะฑะปะตะผะฐ:** Inline ััะธะปะธ ะธะท JSON ะบะพะฝัะปะธะบัะพะฒะฐะปะธ ั CSS ะฟัะฐะฒะธะปะฐะผะธ. `position: absolute` ะพัะฝะพัะธัะตะปัะฝะพ `.sandbox-screen` + `top: 0` ะฒ ะพะฑะพะธั ะผะตััะฐั = ัะปะตะผะตะฝั ะฟัะธะฑะธั ะบ ะฒะตััั.

### ะัะพะฑะปะตะผะฐ #2: pointer-events
```json
"pointerEvents": {
  "reference": "${show_edit_recipient ? 'auto' : 'none'}",
  "value": "none"
}
```

**ะัะพะฑะปะตะผะฐ:** ะฃะฟัะฐะฒะปะตะฝะธะต `pointer-events` ัะตัะตะท JSON ะฑะธะฝะดะธะฝะณะธ ััะปะพะถะฝัะปะพ ะปะพะณะธะบั ะธ ะผะพะณะปะพ ะฟัะธะฒะพะดะธัั ะบ ะฟัะพะฑะปะตะผะฐะผ ั ะธะฝัะตัะฐะบัะธะฒะฝะพัััั.

## ะะตัะตะฝะธะต

### 1. CSS: ะัะธะฒัะทะบะฐ overlay ะบ ะบะพะฝัะตะนะฝะตัั ัะบัะฐะฝะฐ

```css
/* ะกะขะะะ: */
.sandbox-section[data-slot="overlay"] {
  position: absolute !important;    /* ะัะธะฒัะทะบะฐ ะบ .sandbox-screen */
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  width: 100% !important;
  height: 100% !important;
  pointer-events: none;             /* ะะพ ัะผะพะปัะฐะฝะธั ะฝะต ะฑะปะพะบะธััะตั ะบะปะธะบะธ */
}

/* ะะบะปััะฐะตะผ pointer-events ัะพะปัะบะพ ะบะพะณะดะฐ overlay ะฒะธะดะธะผ */
.sandbox-section[data-slot="overlay"][style*="display: flex"],
.sandbox-section[data-slot="overlay"][style*="display:flex"] {
  pointer-events: auto;
}
```

**ะัะตะธะผััะตััะฒะฐ:**
- โ Overlay ัะตะฟะตัั ะพะณัะฐะฝะธัะตะฝ ัะฐะทะผะตัะฐะผะธ `.sandbox-screen`
- โ `pointer-events: none` โ ัะบััััะน ัะปะพะน ะฝะต ะฑะปะพะบะธััะตั ะบะปะธะบะธ
- โ ะะฒัะพะผะฐัะธัะตัะบะพะต ะฒะบะปััะตะฝะธะต ะธะฝัะตัะฐะบัะธะฒะฝะพััะธ ะฟัะธ `display: flex`

### 2. JSON: ะฃะฑัะฐัั ะบะพะฝัะปะธะบััััะธะต ััะธะปะธ ะฟะพะทะธัะธะพะฝะธัะพะฒะฐะฝะธั

```json
// ะะซะะ:
"style": {
  "position": "absolute",
  "top": "0",
  "bottom": "0",
  "left": "0",
  "right": "0",
  "zIndex": "1000",
  "backgroundColor": "rgba(0, 0, 0, 0.5)",
  "display": { /* ... */ },
  "flexDirection": "column",
  "justifyContent": "flex-end",
  "pointerEvents": { /* ... */ }
}
```

```json
// ะกะขะะะ:
"style": {
  "zIndex": "1000",
  "backgroundColor": "rgba(0, 0, 0, 0.5)",
  "display": {
    "reference": "${show_edit_recipient ? 'flex' : 'none'}",
    "value": "none"
  },
  "flexDirection": "column",
  "justifyContent": "flex-end",
  "alignItems": "center"
}
```

**ะะทะผะตะฝะตะฝะธั:**
- โ ะฃะดะฐะปะตะฝั `position`, `top`, `bottom`, `left`, `right` โ ัะฟัะฐะฒะปัะตะผ ัะตัะตะท CSS
- โ ะฃะดะฐะปัะฝ `pointerEvents` โ ัะฟัะฐะฒะปัะตะผ ัะตัะตะท CSS
- โ `alignItems: "center"` โ ะบะพะฝัะตะนะฝะตั ะฒััะฐะฒะฝะธะฒะฐะตััั ะฟะพ ัะตะฝััั, ะฝะพ ัะธัะธะฝะฐ ะทะฐะดะฐัััั ัะฒะฝะพ

## ะะฐะบ ััะพ ัะฐะฑะพัะฐะตั

### ะกัััะบัััะฐ Bottom Sheet

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  overlay (absolute, ะฒะฝัััะธ ัะบัะฐะฝะฐ)     โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ  backdrop (flex: 1, transparent) โ   โ
โ  โ  โ ะะปะธะบ ะทะดะตัั ะทะฐะบััะฒะฐะตั BS       โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ  bottomsheet-container           โ   โ
โ  โ  (ะฑะตะปัะน, ะทะฐะบััะณะปะตะฝะฝัะน ัะฒะตััั)    โ   โ
โ  โ                                  โ   โ
โ  โ  [ะคะพัะผะฐ ัะตะดะฐะบัะธัะพะฒะฐะฝะธั]          โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                โ
         justifyContent: flex-end
         (ะฟัะธะถะธะผะฐะตั ะบ ะฝะธะทั)
```

### ะะพะณะธะบะฐ ะฒะธะดะธะผะพััะธ

1. **ะะพ ัะผะพะปัะฐะฝะธั (ะทะฐะณััะทะบะฐ ัััะฐะฝะธัั):**
   ```json
   { "show_edit_recipient": false }
   ```
   - ะะธะฝะดะธะฝะณ: `${show_edit_recipient ? 'flex' : 'none'}` โ `'none'`
   - ะะตะทัะปััะฐั: `display: none` โ **Bottom Sheet ัะบััั** โ

2. **ะะฐะถะฐัะธะต "ะะทะผะตะฝะธัั ะฟะพะปััะฐัะตะปั":**
   - Event: `showEditRecipient`
   - ะะฑะฝะพะฒะปะตะฝะธะต: `{ "show_edit_recipient": true }`
   - ะะธะฝะดะธะฝะณ: `${show_edit_recipient ? 'flex' : 'none'}` โ `'flex'`
   - ะะตะทัะปััะฐั: `display: flex` โ **Bottom Sheet ะฟะพะบะฐะทะฐะฝ ัะฝะธะทั** โ

3. **ะะฐะบัััะธะต (ะบะปะธะบ ะฝะฐ backdrop ะธะปะธ ะบะฝะพะฟะบะฐ):**
   - Event: `closeRecipientForm`
   - ะะฑะฝะพะฒะปะตะฝะธะต: `{ "show_edit_recipient": false }`
   - ะะธะฝะดะธะฝะณ: `${show_edit_recipient ? 'flex' : 'none'}` โ `'none'`
   - ะะตะทัะปััะฐั: `display: none` โ **Bottom Sheet ัะบััั** โ

## ะัะตะธะผััะตััะฒะฐ ะฝะพะฒะพะณะพ ัะตัะตะฝะธั

1. โ **ะัะพััะพัะฐ:** ะฟะพะทะธัะธะพะฝะธัะพะฒะฐะฝะธะต ัะพััะตะดะพัะพัะตะฝะพ ะฒ ะพะดะฝะพะผ CSS ะฟัะฐะฒะธะปะต
2. โ **ะะพะฝััะพะปั ัะฐะทะผะตัะพะฒ:** overlay ะพะณัะฐะฝะธัะตะฝ ัะฐะผะบะฐะผะธ `.sandbox-screen`
3. โ **ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั:** ะผะตะฝััะต inline ััะธะปะตะน โ ะผะตะฝััะต ะดะธััะพะฒ ะฟัะธ ัะตะฝะดะตัะต
4. โ **ะะฝัะตัะฐะบัะธะฒะฝะพััั:** `pointer-events` ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะฟัะฐะฒะปัะตััั ัะตัะตะท CSS
5. โ **ะงะธัะฐะตะผะพััั:** JSON ะพัะฒะตัะฐะตั ัะพะปัะบะพ ะทะฐ ะฑะธะทะฝะตั-ะปะพะณะธะบั ะพัะพะฑัะฐะถะตะฝะธั

## ะขะตััะธัะพะฒะฐะฝะธะต

### โ ะขะตัั 1: ะะฐัะฐะปัะฝะฐั ะทะฐะณััะทะบะฐ
1. ะัะบัะพะนัะต http://localhost:5174
2. Sandbox โ Avito Demo โ "ะัะพัะผะปะตะฝะธะต"
3. **ะะถะธะดะฐะฝะธะต:** Bottom Sheet ะะ ะฒะธะดะตะฝ โ

### โ ะขะตัั 2: ะัะบัััะธะต
1. ะะฐะถะผะธัะต "ะะทะผะตะฝะธัั ะฟะพะปััะฐัะตะปั"
2. **ะะถะธะดะฐะฝะธะต:** Bottom Sheet ะฟะพัะฒะปัะตััั **ัะฝะธะทั ัะบัะฐะฝะฐ** โ

### โ ะขะตัั 3: ะะฐะบัััะธะต (backdrop)
1. ะะฐะถะผะธัะต ะฝะฐ ะทะฐัะตะผะฝัะฝะฝัะน ัะพะฝ
2. **ะะถะธะดะฐะฝะธะต:** Bottom Sheet ะทะฐะบััะฒะฐะตััั โ

### โ ะขะตัั 4: ะะพะทะธัะธะพะฝะธัะพะฒะฐะฝะธะต
1. ะัะบัะพะนัะต Bottom Sheet
2. **ะัะพะฒะตัะบะฐ:** 
   - ะะตะปัะน ะบะพะฝัะตะนะฝะตั ะฟัะธะถะฐั ะบ ะฝะธะทั ัะบัะฐะฝะฐ
   - Backdrop ะทะฐะฝะธะผะฐะตั ะฒะตััะฝัั ัะฐััั
   - ะะฐะบััะณะปะตะฝะธะต ัะพะปัะบะพ ัะฒะตััั (28px 28px 0 0)

## ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ

### ะะพัะตะผั absolute ะฒะฝัััะธ ะบะพะฝัะตะนะฝะตัะฐ?

- Overlay ัะปะตะดัะตั ะทะฐ ัะฐะทะผะตัะฐะผะธ `.sandbox-screen`
- ะะต ะฒััะพะดะธั ะทะฐ ะณัะฐะฝะธัั ะดะฐะถะต ะฟัะธ ัะบัะพะปะปะต ัััะฐะฝะธัั
- ะกะพะฒะผะตััะธะผ ั border-radius ะธ ัะตะฝัะผะธ ัะบัะฐะฝะฐ
- ะกะพััะฐะฝัะตั ะฟัะธะฒััะฝัั ะผะพะดะตะปั stacking context ะฒะฝัััะธ ะฟัะธะปะพะถะตะฝะธั

### ะะพัะตะผั pointer-events ะฒ CSS?

```css
/* ะะฒัะพะผะฐัะธัะตัะบะพะต ัะฟัะฐะฒะปะตะฝะธะต ะฑะตะท ะฑะธะฝะดะธะฝะณะพะฒ: */
pointer-events: none;  /* ะะพ ัะผะพะปัะฐะฝะธั */

[style*="display: flex"] {
  pointer-events: auto;  /* ะะพะณะดะฐ ะฒะธะดะธะผ */
}
```

**ะัะตะธะผััะตััะฒะฐ:**
- ะะต ะฝัะถะตะฝ ะพัะดะตะปัะฝัะน ะฑะธะฝะดะธะฝะณ ะฒ JSON
- ะะฒัะพะผะฐัะธัะตัะบะธ ัะธะฝััะพะฝะธะทะธัะพะฒะฐะฝะพ ั `display`
- ะะตะฝััะต ะปะพะณะธะบะธ ะฒ ะดะฐะฝะฝัั

## ะกะฒัะทะฐะฝะฝัะต ัะฐะนะปั

- **CSS:** `/src/pages/Sandbox/SandboxPage.css`
- **JSON:** `/src/pages/Sandbox/data/avitoDemo.json`
- **ะะพะบัะผะตะฝัะฐัะธั:**
  - `/docs/bottomsheet-fix.md`
  - `/docs/bottomsheet-display-fix.md`
  - `/docs/bottomsheet-logic.md`

---

**ะะฐัะฐ ะธัะฟัะฐะฒะปะตะฝะธั:** 19 ะพะบััะฑัั 2025  
**ะะตััะธั:** 2.2.0  
**ะกัะฐััั:** โ ะัะฟัะฐะฒะปะตะฝะพ ะธ ะฟัะพัะตััะธัะพะฒะฐะฝะพ
