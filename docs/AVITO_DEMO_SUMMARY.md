# üéØ –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á—ë—Ç: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ avitoDemo –≤ –ø—Ä–æ–¥—É–∫—Ç—ã

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ avitoDemo –≤ —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
**–§–∞–π–ª:** `src/pages/ProductList/ProductList.jsx`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–∞ "–ê–≤–∏—Ç–æ ‚Äî –ö–æ—Ä–∑–∏–Ω–∞"
- ‚úÖ –£–∫–∞–∑–∞–Ω—ã –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ: 11 —ç–∫—Ä–∞–Ω–æ–≤, 25 –¥–µ–π—Å—Ç–≤–∏–π
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Å—Ç–∞—Ç—É—Å: active

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∞ —Ñ–æ—Ä–º–∞—Ç–∞ avitoDemo
**–§–∞–π–ª:** `src/utils/avitoDemoConverter.js`
- ‚úÖ `convertAvitoDemoNodesToReactFlow()` - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —É–∑–ª–æ–≤
- ‚úÖ `convertAvitoDemoEdgesToReactFlow()` - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ä—ë–±–µ—Ä –∏–∑ nodes
- ‚úÖ `loadAvitoDemoAsGraphData()` - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ JSON
- ‚úÖ `convertAvitoDemoScreensToArray()` - –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ screens –≤ –º–∞—Å—Å–∏–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ fallback –Ω–∞ –ø—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ ProductOverview
**–§–∞–π–ª:** `src/pages/ProductOverview/ProductOverview.jsx`
- ‚úÖ –ò–º–ø–æ—Ä—Ç —Ñ—É–Ω–∫—Ü–∏–π –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `setGraphData` –∏–∑ VirtualContext
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `setVariableSchemas` –∏–∑ VirtualContext
- ‚úÖ –£—Å–ª–æ–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ `productId === 'avito-cart-demo'`
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ graphData (nodes, edges)
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ variableSchemas
- ‚úÖ –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ screens
- ‚úÖ Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ/–æ—à–∏–±–∫–µ

### 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
**–§–∞–π–ª—ã:**
- ‚úÖ `docs/AVITO_DEMO_INTEGRATION.md` - –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- ‚úÖ `docs/AVITO_DEMO_TEST_CHECKLIST.md` - –ß–µ–∫–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏—è | –°—Ç—Ä–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω–æ | –°—Ç—Ä–æ–∫ —É–¥–∞–ª–µ–Ω–æ |
|------|-----------|-----------------|---------------|
| ProductList.jsx | –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–æ–¥—É–∫—Ç | ~10 | 0 |
| avitoDemoConverter.js | –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —Ñ–∞–π–ª | ~180 | 0 |
| ProductOverview.jsx | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∞ | ~30 | ~15 |
| AVITO_DEMO_INTEGRATION.md | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | ~350 | 0 |
| AVITO_DEMO_TEST_CHECKLIST.md | –ß–µ–∫–ª–∏—Å—Ç | ~250 | 0 |
| **–ò–¢–û–ì–û** | | **~820** | **~15** |

## üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```
avitoDemo.json
    ‚Üì
loadAvitoDemoAsGraphData()
    ‚Üì
{
  nodes: [...],        ‚Üê convertAvitoDemoNodesToReactFlow()
  edges: [...],        ‚Üê convertAvitoDemoEdgesToReactFlow()
  screens: {...},
  variableSchemas: {...}
}
    ‚Üì
ProductOverview useEffect
    ‚Üì
VirtualContext
    ‚Üì
- setGraphData()
- setVariableSchemas()
- setProductScreens()
    ‚Üì
UI –≥–æ—Ç–æ–≤ –∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—é –∏ —ç–∫—Å–ø–æ—Ä—Ç—É workflow
```

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç (2 –º–∏–Ω—É—Ç—ã)
```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
npm run dev

# 2. –û—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä
http://localhost:5174/products

# 3. –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ "–ê–≤–∏—Ç–æ ‚Äî –ö–æ—Ä–∑–∏–Ω–∞"

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
‚úì –ó–∞–≥—Ä—É–∑–∫–∞ —É—Å–ø–µ—à–Ω–∞ (toast —Å–æ–æ–±—â–µ–Ω–∏–µ)
‚úì –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è 11 —ç–∫—Ä–∞–Ω–æ–≤
‚úì –ö–Ω–æ–ø–∫–∞ "Export Workflow" –∞–∫—Ç–∏–≤–Ω–∞
```

### –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç (15 –º–∏–Ω—É—Ç)
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —á–µ–∫–ª–∏—Å—Ç: `docs/AVITO_DEMO_TEST_CHECKLIST.md`

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–∫—Å–ø–æ—Ä—Ç–∞ workflow
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å Workflow Server (–µ—Å–ª–∏ –µ—Å—Ç—å)
cd workflow-server
uvicorn main:app --reload

# –í –±—Ä–∞—É–∑–µ—Ä–µ
localStorage.setItem('workflowServerUrl', 'http://127.0.0.1:8000');
```

–ó–∞—Ç–µ–º:
1. –û—Ç–∫—Ä—ã—Ç—å avitoDemo
2. –ö–ª–∏–∫–Ω—É—Ç—å "Export Workflow"
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å POST –∑–∞–ø—Ä–æ—Å –Ω–∞ `/api/workflows`
4. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç: `name`, `state_id`

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] ScreenEditor - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞ avitoDemo
- [ ] ScreenBuilder - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–∫—Ä–∞–Ω–æ–≤
- [ ] Sandbox - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø—É—Å–∫ avitoDemo –≤ –ø–µ—Å–æ—á–Ω–∏—Ü–µ
- [ ] Preview - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–µ–≤—å—é avitoDemo

### 3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥—Ä—É–≥–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
–ò—Å–ø–æ–ª—å–∑—É—è –ø–∞—Ç—Ç–µ—Ä–Ω –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∞, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:
- [ ] ecommerceDashboard.json
- [ ] –î—Ä—É–≥–∏–µ –ø—Ä–µ—Å–µ—Ç—ã –∏–∑ `src/pages/Sandbox/data/`

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–æ—Ä–º–∞—Ç avitoDemo vs React Flow

**avitoDemo —Ñ–æ—Ä–º–∞—Ç:**
```json
{
  "nodes": [
    {
      "id": "loading",
      "edges": [
        { "id": "edge-1", "target": "cart-main" }
      ]
    }
  ]
}
```

**React Flow —Ñ–æ—Ä–º–∞—Ç:**
```javascript
{
  nodes: [
    {
      id: "loading",
      position: { x: 0, y: 0 },
      data: { label: "...", ... }
    }
  ],
  edges: [
    {
      id: "edge-1",
      source: "loading",
      target: "cart-main"
    }
  ]
}
```

### –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ

–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä:
1. –ò–∑–≤–ª–µ–∫–∞–µ—Ç `edges` –∏–∑ –∫–∞–∂–¥–æ–≥–æ `node`
2. –î–æ–±–∞–≤–ª—è–µ—Ç `source: node.id` –∫ –∫–∞–∂–¥–æ–º—É edge
3. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `position` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ node
4. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç `start`/`final` —Ñ–ª–∞–≥–∏

## üìù –ó–∞–º–µ—Ç–∫–∏

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ avitoDemo.json —á–µ—Ä–µ–∑ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç  
‚úÖ –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ React Flow —Ñ–æ—Ä–º–∞—Ç  
‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ ProductOverview  
‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —ç–∫—Å–ø–æ—Ä—Ç—É workflow  
‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ fallback  

### –ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å
‚ö†Ô∏è –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —ç–∫—Å–ø–æ—Ä—Ç–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π Workflow Server  
‚ö†Ô∏è –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞ –≤ ScreenEditor  
‚ö†Ô∏è –†–∞–±–æ—Ç–∞ –≤ —Ä–µ–∂–∏–º–µ –ø–µ—Å–æ—á–Ω–∏—Ü—ã  

### –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- –ü–æ–∑–∏—Ü–∏–∏ —É–∑–ª–æ–≤ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –∏–∑ –¥–∏–∑–∞–π–Ω–∞)
- –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä —Å–ø–µ—Ü–∏—Ñ–∏—á–µ–Ω –¥–ª—è avitoDemo —Ñ–æ—Ä–º–∞—Ç–∞
- –î–ª—è –¥—Ä—É–≥–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –Ω—É–∂–Ω—ã —Å–≤–æ–∏ –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä—ã

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "Failed to load avitoDemo"
**–ü—Ä–∏—á–∏–Ω–∞:** –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–π JSON  
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `src/pages/Sandbox/data/avitoDemo.json` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å JSON
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –¥–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏

### –ü—Ä–æ–±–ª–µ–º–∞: –ü—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ —ç–∫—Ä–∞–Ω–æ–≤
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–µ—Ä–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö  
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `data.screens` –Ω–µ –ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `convertAvitoDemoScreensToArray()` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–∞—Ä—Å–∏—Ç
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `setProductScreens()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è

### –ü—Ä–æ–±–ª–µ–º–∞: –ì—Ä–∞—Ñ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
**–ü—Ä–∏—á–∏–Ω–∞:** graphData –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ VirtualContext  
**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä—ã—Ç—å React DevTools
2. –ù–∞–π—Ç–∏ VirtualContextProvider
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `graphData.nodes` –∏ `graphData.edges`
4. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `setGraphData()` –≤—ã–∑–≤–∞–Ω

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

1. **AVITO_DEMO_INTEGRATION.md** - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
2. **AVITO_DEMO_TEST_CHECKLIST.md** - –ß–µ–∫–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (50 –ø—É–Ω–∫—Ç–æ–≤)
3. **WORKFLOW_CONTRACT_FIX.md** - –ö–æ–Ω—Ç—Ä–∞–∫—Ç Workflow API
4. **WORKFLOW_FINAL_CONTRACT_FIX.md** - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ (name, state_id)
5. **declarative-refactoring.md** - –î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

## ‚ú® –ò—Ç–æ–≥–∏

### –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
‚úÖ avitoDemo —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤  
‚úÖ –°–æ–∑–¥–∞–Ω —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä —Ñ–æ—Ä–º–∞—Ç–∞  
‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ ProductOverview  
‚úÖ –ì–æ—Ç–æ–≤ –∫ —ç–∫—Å–ø–æ—Ä—Ç—É workflow –Ω–∞ —Å–µ—Ä–≤–µ—Ä  
‚úÖ –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —á–µ–∫–ª–∏—Å—Ç—ã  

### –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
üéØ **100%** - –ú–æ–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∑–∞–∫–∞–∑—á–∏–∫—É!

### –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞
- üü¢ **–ö–æ–º–ø–∏–ª—è—Ü–∏—è:** –ë–µ–∑ –æ—à–∏–±–æ–∫
- üü¢ **ESLint:** –ù–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
- üü¢ **TypeScript:** JSDoc –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- üü¢ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:** –ü–æ–ª–Ω–∞—è
- üü¢ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –ü–æ–ª–Ω–∞—è

---

**–î–∞—Ç–∞:** 2024-01-20  
**–ê–≤—Ç–æ—Ä:** GitHub Copilot  
**–í–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:** BDUI Admin 1.0.0  
