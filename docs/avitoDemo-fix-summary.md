# –°–≤–æ–¥–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π: avitoDemo.json

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### –ü—Ä–æ–±–ª–µ–º–∞
–°–æ–±—ã—Ç–∏–µ `toggleShopSelection` (–∏ –µ—â—ë 2 —Å–æ–±—ã—Ç–∏—è) –Ω–µ –∏–º–µ–ª–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π –≤ –≤–æ—Ä–∫—Ñ–ª–æ—É. –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ UI-—ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ.

### –†–µ—à–µ–Ω–∏–µ
–î–æ–±–∞–≤–ª–µ–Ω—ã 3 –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö integration state:

1. **`toggle-shop-selection-integration`**
   - API: `PATCH /api/carts/3/shops/${shop_id}/toggle-selection`
   - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –≤—ã–±–æ—Ä –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤ –º–∞–≥–∞–∑–∏–Ω–∞
   - –ü–∞—Ä–∞–º–µ—Ç—Ä: `shop_id` (–ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ `eventParams`)

2. **`toggle-select-all-integration`**
   - API: `PATCH /api/carts/3/toggle-select-all`
   - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –í—ã–±—Ä–∞—Ç—å/—Å–Ω—è—Ç—å –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: –ù–µ—Ç

3. **`delete-selected-integration`**
   - API: `DELETE /api/carts/3/selected-items`
   - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: –ù–µ—Ç

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª–∞—Ö

#### 1. `src/pages/Sandbox/data/avitoDemo.json`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã 3 edge –≤ `cart-main` ‚Üí `edges[]`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã 3 integration state –≤ `nodes[]`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `shop_id` –≤ `variableSchemas` –∏ `initialContext`

#### 2. `docs/diagrams/avitoDemo-state-diagram.mmd`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ Mermaid-–¥–∏–∞–≥—Ä–∞–º–º–∞ —Å –Ω–æ–≤—ã–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã 3 –Ω–æ–≤—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ –≥—Ä–∞—Ñ

#### 3. `docs/avitoDemo-missing-states-fix.md`
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

---

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ü–æ–∫–∞–∑–∞—Ç–µ–ª—å | –î–æ | –ü–æ—Å–ª–µ |
|------------|----|----|
| –í—Å–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏–π | 8 | **11** (+3) |
| Integration states | 6 | **9** (+3) |
| –°–æ–±—ã—Ç–∏—è –≤ cart-main | 6 | **9** (+3) |

---

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è ‚ùå
```
UI Event: toggleShopSelection
  ‚Üí –ù–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ edge
    ‚Üí –ù–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥–∞
      ‚Üí ‚ùå –ù–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è ‚úÖ
```
UI Event: toggleShopSelection (shop_id: 14)
  ‚Üí Edge: edge-toggle-shop-selection
    ‚Üí State: toggle-shop-selection-integration
      ‚Üí API: PATCH /api/carts/3/shops/14/toggle-selection
        ‚Üí Transition: fetch-cart-items
          ‚Üí ‚úÖ –ö–æ—Ä–∑–∏–Ω–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ Sandbox –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–ß–µ–∫–±–æ–∫—Å "–í—ã–±—Ä–∞—Ç—å –≤—Å—ë"** (–≤ header)
   - –î–æ–ª–∂–µ–Ω –≤—ã–±—Ä–∞—Ç—å/—Å–Ω—è—Ç—å –≤—Å–µ —Ç–æ–≤–∞—Ä—ã
   - –ü–æ—Å–ª–µ –∫–ª–∏–∫–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

2. **–ö–Ω–æ–ø–∫–∞ "–£–¥–∞–ª–∏—Ç—å (N)"** (–≤ header)
   - –î–æ–ª–∂–Ω–∞ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
   - –ü–æ—Å–ª–µ –∫–ª–∏–∫–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

3. **–ß–µ–∫–±–æ–∫—Å –≤–æ–∑–ª–µ –º–∞–≥–∞–∑–∏–Ω–∞** (–≤ —Å–ø–∏—Å–∫–µ –º–∞–≥–∞–∑–∏–Ω–æ–≤)
   - –î–æ–ª–∂–µ–Ω –≤—ã–±—Ä–∞—Ç—å/—Å–Ω—è—Ç—å –≤—Å–µ —Ç–æ–≤–∞—Ä—ã —ç—Ç–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞
   - –ü–æ—Å–ª–µ –∫–ª–∏–∫–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

---

## JSON –≤–∞–ª–∏–¥–∞—Ü–∏—è

```bash
‚úÖ JSON –≤–∞–ª–∏–¥–Ω—ã–π!
–í—Å–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏–π: 11
–°–æ–±—ã—Ç–∏—è –≤ cart-main: 9
```

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã! üéâ
