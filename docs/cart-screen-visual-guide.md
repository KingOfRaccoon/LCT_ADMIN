# 🛒 Визуальный гид экрана корзины

## 📱 Состояние 1: Пустая корзина

```
┌─────────────────────────────────────────────┐
│  Корзина                                    │
│  Екатерина Батюшкова                       │
├─────────────────────────────────────────────┤
│                                             │
│                                             │
│              🛒                             │
│         (200×200px)                         │
│                                             │
│      В корзине пусто                        │
│   Добавьте товары из каталога              │
│                                             │
│                                             │
├─────────────────────────────────────────────┤
│  Итого            Выбрано: 0               │
│  0 ₽                                        │
│                                             │
│  [Оформить доставку] (disabled)            │
└─────────────────────────────────────────────┘
```

**Характеристики**:
- Центрированное содержимое
- Иконка корзины placeholder
- Заголовок: "В корзине пусто" (24px, bold)
- Описание: "Добавьте товары из каталога" (15px, gray)
- Кнопка оформления отключена

---

## 📱 Состояние 2: Заполненная корзина

```
┌──────────────────────────────────────────────────┐
│  Корзина                                         │
│  Екатерина Батюшкова                            │
├──────────────────────────────────────────────────┤
│                                                  │
│  ┌────────────────────────────────────────┐    │
│  │ [img] Apple MagSafe Charger      🗑️ ☑️ │    │
│  │       15W 1шт                          │    │
│  │       4 990 ₽                          │    │
│  │                         [−]  1  [+]   │    │
│  └────────────────────────────────────────┘    │
│                                                  │
│  ┌────────────────────────────────────────┐    │
│  │ [img] AirPods Pro 2                🗑️ ⬜│    │
│  │       256Gb                             │    │
│  │       15 990 ₽                         │    │
│  │                         [−]  2  [+]   │    │
│  └────────────────────────────────────────┘    │
│                                                  │
│  ────────────────────────────────────────────  │
│                                                  │
│  Добавьте ещё 1 товар до скидки 5%             │
│                                                  │
│  ┌────────────────────────────────────────┐    │
│  │ [img] Apple Watch 10  [В корзину]     │    │
│  │       26 591 ₽                         │    │
│  └────────────────────────────────────────┘    │
│                                                  │
│  ┌────────────────────────────────────────┐    │
│  │ [img] iPhone 16 Pro   [В корзину]     │    │
│  │       99 990 ₽                         │    │
│  └────────────────────────────────────────┘    │
│                                                  │
├──────────────────────────────────────────────────┤
│  Итого                     Выбрано: 2          │
│  36 970 ₽                                       │
│                                                  │
│  [     Оформить доставку     ]                 │
└──────────────────────────────────────────────────┘
```

---

## 🎨 Детальный разбор карточки товара

### Основная карточка товара в корзине

```
┌────────────────────────────────────────────────┐
│  ┌─────┐                              🗑️  ☑️  │
│  │     │  Apple MagSafe Charger                │
│  │ 80× │  15W 1шт                               │
│  │ 80  │  4 990 ₽                               │
│  └─────┘                                        │
│                                  [−]  1  [+]   │
└────────────────────────────────────────────────┘
```

**Элементы слева направо**:
1. **Изображение** (80×80px, border-radius: 8px)
2. **Блок информации**:
   - Название (15px, font-weight: 600, black)
   - Описание (13px, gray)
   - Цена (17px, font-weight: 700, black)
3. **Кнопки управления** (правый верхний угол):
   - 🗑️ Удалить (`removeItem`)
   - ☑️/⬜ Фокус (`toggleFocus`)
4. **Счетчик** (правый нижний угол):
   - [−] Уменьшить (`decreaseQuantity`)
   - Количество (center, 15px, bold)
   - [+] Увеличить (`increaseQuantity`)

**Стили кнопок счетчика**:
- Размер: 32×32px
- Border-radius: 8px
- Background: #F0F0F0
- Border: 1px solid #E5E5E5
- Font-size: 18px
- Font-weight: 600

---

### Карточка с отключенным фокусом

```
┌────────────────────────────────────────────────┐
│  ┌─────┐                              🗑️  ⬜  │ 
│  │     │  AirPods Pro 2                        │ (opacity: 0.5)
│  │ 80× │  256Gb                                │
│  │ 80  │  15 990 ₽                             │
│  └─────┘                                        │
│                                  [−]  2  [+]   │
└────────────────────────────────────────────────┘
```

**Отличия**:
- Вся карточка имеет `opacity: 0.5`
- Чекбокс показывает ⬜ вместо ☑️
- Товар не участвует в расчете `total_price` и `selected_count`

---

## 🛍️ Блок предлагаемых товаров

### Заголовок

```
Добавьте ещё 1 товар до скидки 5%
```

**Стили**:
- Font-size: 13px
- Font-weight: 600
- Color: #8E8E93 (gray)
- Margin-top: после divider

---

### Карточка предлагаемого товара

```
┌──────────────────────────────────────────────┐
│  ┌────┐                                       │
│  │ 60×│  Apple Watch 10     [В корзину]      │
│  │ 60 │  26 591 ₽                             │
│  └────┘                                       │
└──────────────────────────────────────────────┘
```

**Элементы**:
1. **Изображение** (60×60px, border-radius: 8px)
2. **Информация**:
   - Название (14px, font-weight: 600)
   - Цена (15px, font-weight: 700)
3. **Кнопка "В корзину"**:
   - Background: #0A74F0 (blue)
   - Color: white
   - Padding: 8px 16px
   - Border-radius: 8px
   - Font-size: 13px
   - Event: `addToCart` с `advertisement_id`

**Стили карточки**:
- Background: #F9F9F9 (light gray)
- Border: 1px solid #E5E5E5
- Border-radius: 12px
- Padding: 12px
- Cursor: pointer

---

## 💰 Футер с итоговой информацией

```
┌──────────────────────────────────────────────┐
│  Итого                     Выбрано: 2        │
│  36 970 ₽                                     │
│                                               │
│  ┌──────────────────────────────────────┐   │
│  │    Оформить доставку                 │   │
│  └──────────────────────────────────────┘   │
└──────────────────────────────────────────────┘
```

**Левая часть**:
- "Итого" (13px, gray)
- Цена (24px, font-weight: 700, black)

**Правая часть**:
- "Выбрано: N" (13px, gray)

**Кнопка**:
- Width: 100%
- Height: 52px (padding: 16px)
- Background: #0A74F0 (blue)
- Color: white
- Font-size: 16px
- Font-weight: 600
- Border-radius: 12px
- Disabled: если корзина пуста

---

## 🎭 Анимации и интерактивность

### Hover эффекты

**Кнопки счетчика [−] [+]**:
```css
:hover {
  background: #E5E5E5;
  transform: scale(1.05);
}
```

**Кнопка "В корзину"**:
```css
:hover {
  background: #0860D4;
  box-shadow: 0 4px 12px rgba(10, 116, 240, 0.3);
}
```

**Иконки 🗑️ и ☑️/⬜**:
```css
:hover {
  transform: scale(1.2);
  filter: brightness(0.8);
}
```

### Transitions

**Изменение количества**:
- Fade out → API call → Fade in обновленной корзины

**Удаление товара**:
- Slide out → API call → Re-render списка

**Toggle фокуса**:
- Opacity transition 0.3s ease

---

## 📐 Размеры и отступы

### Spacing system

| Элемент | Padding | Margin | Gap |
|---------|---------|---------|-----|
| Header | 16px | - | 12px |
| Body | 16px | - | 16px |
| Footer | 16px | - | 12px |
| Card | 16px | 12px | 12px |
| Suggested card | 12px | - | 12px |
| Button | 8-16px | - | - |

### Border radius

| Элемент | Radius |
|---------|--------|
| Screen | 12px |
| Card | 12px |
| Button | 8-12px |
| Image | 8px |
| Counter button | 8px |

### Borders

| Элемент | Border |
|---------|--------|
| Header bottom | 1px solid #E5E5E5 |
| Footer top | 1px solid #E5E5E5 |
| Card | 1px solid #E5E5E5 |
| Divider | 1px solid #E5E5E5 |

---

## 🎨 Цветовая палитра

### Основные цвета

```css
--primary-blue: #0A74F0;
--primary-blue-hover: #0860D4;
--text-black: #2F3034;
--text-gray: #8E8E93;
--border-gray: #E5E5E5;
--background-light: #F9F9F9;
--background-white: #ffffff;
```

### Применение

| Элемент | Цвет |
|---------|------|
| Primary button | #0A74F0 |
| Heading | #2F3034 |
| Body text | #000000 |
| Caption | #8E8E93 |
| Border | #E5E5E5 |
| Card background | #ffffff |
| Suggested background | #F9F9F9 |

---

## 📊 Responsive breakpoints

### Desktop (> 768px)
- Max width: 480px
- Center aligned
- Full functionality

### Mobile (< 768px)
- Width: 100%
- Reduced padding: 12px
- Smaller images: 60×60px for items
- Font sizes: -1-2px

---

## 🔄 Flow диаграмма взаимодействий

```
Пользователь → [Кнопка +] → increaseQuantity event
                              ↓
                         selected_item_id в eventParams
                              ↓
                    increase-quantity-integration
                              ↓
                    PATCH /update-quantity (+1)
                              ↓
                         Успех → fetch-cart-items
                              ↓
                    GET /carts/3/with-advertisements
                              ↓
                         Обновление UI
                              ↓
                    Новый total_price и selected_count
```

---

## ✅ Чек-лист реализации

- [x] Пустое состояние с иконкой и текстом
- [x] Список товаров с карточками
- [x] Кнопки увеличения/уменьшения количества
- [x] Кнопка удаления товара
- [x] Чекбокс фокуса (участие в расчете)
- [x] Визуальное затемнение товаров без фокуса
- [x] Блок предлагаемых товаров
- [x] Кнопки добавления предлагаемых товаров
- [x] Футер с итоговой стоимостью
- [x] Счетчик выбранных товаров
- [x] Кнопка оформления (disabled для пустой корзины)
- [x] Интеграционные состояния для всех операций
- [x] Обновление корзины после каждой операции
- [x] Условная логика для двух состояний экрана

---

## 🚀 Примеры тестирования

### Сценарий 1: Пустая корзина
1. Открыть `/sandbox` с пустым `cart_response.advertisements`
2. Проверить отображение "В корзине пусто"
3. Проверить что кнопка "Оформить доставку" disabled
4. Проверить отсутствие списка товаров

### Сценарий 2: Добавление товара
1. Открыть корзину с предлагаемыми товарами
2. Нажать "В корзину" на предлагаемом товаре
3. Проверить вызов `add-to-cart-integration`
4. Проверить обновление списка товаров
5. Проверить обновление `total_price` и `selected_count`

### Сценарий 3: Управление количеством
1. Открыть корзину с 1 товаром (quantity: 1)
2. Нажать [+] → quantity: 2
3. Проверить обновление счетчика
4. Проверить обновление цены
5. Нажать [−] → quantity: 1
6. Проверить обновление

### Сценарий 4: Снятие фокуса
1. Открыть корзину с 2 товарами (оба is_focused: true)
2. Нажать чекбокс на первом товаре → ⬜
3. Проверить `opacity: 0.5`
4. Проверить уменьшение `total_price` и `selected_count`
5. Нажать чекбокс снова → ☑️
6. Проверить восстановление прозрачности и цены

### Сценарий 5: Удаление товара
1. Открыть корзину с 2 товарами
2. Нажать 🗑️ на первом товаре
3. Проверить вызов `remove-item-integration`
4. Проверить удаление товара из списка
5. Проверить обновление `total_price` и `selected_count`

### Сценарий 6: Переход к оформлению
1. Открыть корзину с товарами
2. Нажать "Оформить доставку"
3. Проверить переход на `checkout-screen`
4. Проверить что кнопка disabled для пустой корзины

---

## 📝 Заметки для разработчиков

### Backend endpoints
Убедитесь что API поддерживает:
- `quantity` в response (для счетчика)
- `is_focused` в response (для чекбокса)
- `total_price` и `selected_count` в корзине
- Корректные CORS headers

### Frontend интеграция
- Используйте debounce для rapid clicks на [+]/[-]
- Добавьте loading состояния во время API calls
- Обрабатывайте ошибки с user-friendly сообщениями
- Используйте optimistic updates для лучшего UX

### Тестирование
- Unit tests для каждого integration state
- E2E тесты для всех user flows
- Visual regression tests для UI
- Performance тесты для списков (>100 товаров)

---

**Файл**: `docs/cart-screen-visual-guide.md`  
**Дата**: 17 октября 2025  
**Версия**: 1.0.0  
