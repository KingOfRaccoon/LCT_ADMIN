# 🎯 Визуальный гайд: Смена API URL

```
┌─────────────────────────────────────────────────────────────────┐
│  📁 Структура проекта                                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  src/                                                           │
│  ├── config/                                                    │
│  │   └── api.js  ⬅️  🔧 МЕНЯЙТЕ ЗДЕСЬ!                         │
│  │                                                              │
│  ├── utils/                                                     │
│  │   └── workflowApi.js  ← импортирует из config/api.js       │
│  │                                                              │
│  ├── services/                                                  │
│  │   └── workflowApi.js  ← импортирует из config/api.js       │
│  │                                                              │
│  ├── hooks/                                                     │
│  │   └── useWorkflowApi.js  ← импортирует из config/api.js    │
│  │                                                              │
│  └── components/                                                │
│      └── WorkflowSettings/                                      │
│          └── WorkflowSettings.jsx  ← импортирует из config/api │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

## 🎨 Как это работает

```
┌──────────────────────┐
│  src/config/api.js   │  ⬅️  Изменили BASE_URL
│  BASE_URL = '...'    │
└──────────┬───────────┘
           │
           ├──────────────────────────────────────────┐
           │                                          │
           ▼                                          ▼
  ┌────────────────┐                        ┌────────────────┐
  │ workflowApi.js │                        │ WorkflowAPI    │
  │ getBaseUrl()   │                        │ constructor()  │
  └────────┬───────┘                        └────────┬───────┘
           │                                          │
           ▼                                          ▼
    ┌──────────────┐                         ┌──────────────┐
    │ SandboxPage  │                         │ PreviewPage  │
    │ loadWorkflow │                         │ loadWorkflow │
    └──────────────┘                         └──────────────┘
           │                                          │
           └────────────┬─────────────────────────────┘
                        ▼
              ┌──────────────────────┐
              │  Fetch API запрос    │
              │  https://...         │  ⬅️  Автоматически использует новый URL
              └──────────────────────┘
```

## 📝 Пошаговая инструкция

### Шаг 1: Откройте файл

```bash
code src/config/api.js
```

или в VS Code:
```
Cmd/Ctrl + P → введите "api.js" → Enter
```

### Шаг 2: Найдите строку 18

```javascript
// Было:
export const BASE_URL = 'https://sandkittens.me';

// Стало:
export const BASE_URL = 'http://localhost:8000';
```

### Шаг 3: Сохраните

```
Cmd/Ctrl + S
```

### Шаг 4: Перезапустите сервер

В терминале:
```bash
Ctrl + C  (остановить текущий процесс)
npm run dev  (запустить снова)
```

### Шаг 5: Проверьте в консоли

Откройте Sandbox или Preview, в консоли браузера увидите:

```
[API] POST http://localhost:8000/client/workflow { ... }
```

✅ Готово! Теперь все запросы идут на новый URL!

## 🎭 Визуальный пример

### До изменений:

```
┌─────────────────────────────────────┐
│  Your App                           │
├─────────────────────────────────────┤
│                                     │
│  [Sandbox]  [Preview]               │
│      │          │                   │
│      └──────────┴────────► API      │
│                           ↓         │
│               https://sandkittens.me│
│                                     │
└─────────────────────────────────────┘
```

### После изменений:

```
┌─────────────────────────────────────┐
│  Your App                           │
├─────────────────────────────────────┤
│                                     │
│  [Sandbox]  [Preview]               │
│      │          │                   │
│      └──────────┴────────► API      │
│                           ↓         │
│            http://localhost:8000    │
│                                     │
└─────────────────────────────────────┘
```

## 🚨 Частые ошибки

### ❌ Ошибка 1: Забыли перезапустить

```
Симптом: URL не меняется
Решение: Ctrl + C, затем npm run dev
```

### ❌ Ошибка 2: Неправильный формат URL

```
❌ НЕ ТАК:
export const BASE_URL = 'https://sandkittens.me/';  // Trailing slash

✅ ТАК:
export const BASE_URL = 'https://sandkittens.me';   // Без trailing slash
```

### ❌ Ошибка 3: Изменили не в том файле

```
❌ НЕ ТАК:
src/utils/workflowApi.js  // Не здесь!

✅ ТАК:
src/config/api.js  // Только здесь!
```

## 🎨 Цветовая схема логов

В консоли браузера:

```
🟦 [API] POST https://... { ... }          # Синий - запрос
🟩 [API] POST https://... → 200 (245ms)    # Зелёный - успех
🟥 [API] POST https://... → ERROR (312ms)  # Красный - ошибка
```

## 📱 Для разных окружений

```
┌────────────────┬─────────────────────────────┐
│ Окружение      │ BASE_URL                    │
├────────────────┼─────────────────────────────┤
│ Development    │ http://localhost:8000       │
│ Staging        │ https://staging.example.com │
│ Production     │ https://sandkittens.me      │
│ Custom         │ https://your-server.com     │
└────────────────┴─────────────────────────────┘
```

## ⚡ Горячие клавиши

```
Cmd/Ctrl + P      → Быстрый поиск файлов (введите "api.js")
Cmd/Ctrl + S      → Сохранить файл
Cmd/Ctrl + /      → Закомментировать/раскомментировать
Cmd/Ctrl + F      → Найти в файле
```

## 🎯 Главное правило

```
┌───────────────────────────────────────────────────────┐
│                                                       │
│  Меняйте BASE_URL только в src/config/api.js!        │
│                                                       │
│  Всё остальное обновится автоматически! ✨            │
│                                                       │
└───────────────────────────────────────────────────────┘
```

---

💡 **Совет:** Добавьте `src/config/api.js` в закладки VS Code для быстрого доступа!
