# BDUI Admin Panel - Business-Driven User Interface Platform

> –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è low-code –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —Å drag-and-drop –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º, real-time –ø—Ä–µ–≤—å—é –∏ seamless data binding —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.

[![React](https://img.shields.io/badge/React-19.1.1-61dafb?logo=react)](https://react.dev/)
[![Vite](https://img.shields.io/badge/Vite-7.1.2-646cff?logo=vite)](https://vitejs.dev/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)]()

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#-–æ—Å–Ω–æ–≤–Ω—ã–µ-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#Ô∏è-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏](#-—Å–∏—Å—Ç–µ–º–∞-–∞–Ω–∞–ª–∏—Ç–∏–∫–∏)
- [–î–µ–º–æ-—Å—Ü–µ–Ω–∞—Ä–∏–∏](#-–¥–µ–º–æ-—Å—Ü–µ–Ω–∞—Ä–∏–∏)
- [Design Tokens](#-design-tokens--–∫—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–π-—Å—Ç–∏–ª–∏–Ω–≥)
- [API –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã](#-api-–∏-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [Deployment](#-deployment)
- [–†–∞–±–æ—á–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã](#-—Ä–∞–±–æ—á–∏–µ-–ø—Ä–æ—Ü–µ—Å—Å—ã)

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- **Product List Dashboard**: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏ —Å grid/table view, –ø–æ–∏—Å–∫–æ–º, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ CRUD –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
- **Product Overview**: —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö, –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞ —ç–∫—Ä–∞–Ω–æ–≤, –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **Screen Flow Editor**: –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –≥—Ä–∞—Ñ–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –Ω–∞ React Flow —Å custom —É–∑–ª–∞–º–∏ (screens, actions, conditions)
- **UI Builder**: drag-and-drop –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å real-time –ø—Ä–µ–≤—å—é, –ø–∞–Ω–µ–ª—å —Å–≤–æ–π—Å—Ç–≤, data binding –∫ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º—É –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
- **Sandbox**: –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —Å—Ä–µ–¥–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≥—Ä–∞—Ñ–æ–≤ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π, –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–º–∏ –ø–∞—Ç—á–∞–º–∏ –∏ –∏—Å—Ç–æ—Ä–∏–µ–π

### –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ üìä
- **Event Tracking**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä —Å–æ–±—ã—Ç–∏–π (SCREEN_VIEW, UI_CLICK, INTERACTION_TIME, SESSION_START)
- **Analytics Dashboard**: –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ —Å Recharts (timeline, screen stats, click stats, —Å–≤–æ–¥–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏)
- **Persistence**: —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –≤ localStorage —Å TTL (6 —á–∞—Å–æ–≤)
- **Session Management**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∞–Ω—Å–∞–º–∏ —Å —Ç–∞–π–º–µ—Ä–∞–º–∏ —ç–∫—Ä–∞–Ω–æ–≤
- **Integration**: –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ SandboxPage, ApiSandboxRunner, SandboxScreenRenderer

### Virtual Context System
- **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –≤–≤–æ–¥–æ–≤, API-–≤—ã–∑–æ–≤–æ–≤ –∏ –¥–µ–π—Å—Ç–≤–∏–π
- **Data Binding**: –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è –ø—Ä–∏–≤—è–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
- **Type Inference**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–≤–æ–¥ —Ç–∏–ø–æ–≤ (string, number, boolean, array, object) —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç "–ø–æ–Ω–∏–∂–µ–Ω–∏—è"
- **Context Patching**: –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å –ø–æ–±–æ—á–Ω—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏ (—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, fallback-–∑–Ω–∞—á–µ–Ω–∏—è)
- **Dependency Tracking**: –≥—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–µ–∂–¥—É –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **Widgets**: button, text, input, image, container, row, column, list, section
- **Widget Presets**: –≥–æ—Ç–æ–≤—ã–µ —Å—Ç–∏–ª–µ–≤—ã–µ –ø—Ä–µ—Å–µ—Ç—ã –¥–ª—è –∫–Ω–æ–ø–æ–∫, –ø–æ–ª–µ–π, —Å–ø–∏—Å–∫–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ (primary/secondary) –∏ —Ä–∞–∑–º–µ—Ä–æ–≤
- **Screen Renderer**: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ legacy —Ñ–æ—Ä–º–∞—Ç–∞ `components` –∏ –Ω–æ–≤–æ–≥–æ `sections` —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ children

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –î–∏–∞–≥—Ä–∞–º–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

<p align="center">
	<img src="./docs/widget-context-diagram.png" alt="–î–∏–∞–≥—Ä–∞–º–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –≤–∏–¥–∂–µ—Ç–æ–≤ –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞" width="720" />
</p>

### –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏ —ç–∫—Ä–∞–Ω–∞

<p align="center">
	<img src="./docs/widget-context-sequence.png" alt="–î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏ —ç–∫—Ä–∞–Ω–∞" width="720" />
</p>

### –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

<p align="center">
	<img src="./docs/widget-context-dataflow.png" alt="–î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã" width="720" />
</p>

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```mermaid
flowchart LR
	subgraph Backend
		ctx[(Virtual Context)]
		screenDef[Screen Definition + Widget Props]
		enrich[[–°–µ—Ä–≤–∏—Å –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏]]
	end

	subgraph Frontend
		renderer[–ö–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –¥–µ—Ä–µ–≤–æ —ç–∫—Ä–∞–Ω–∞]
		widgets{{–í–∏–¥–∂–µ—Ç—ã}}
		events[[Event Dispatcher]]
	end

	ctx --> enrich
	screenDef --> enrich
	enrich -->|contextSnapshot| renderer
	renderer --> widgets
	widgets -->|consumesContext| renderer
	widgets -->|producesContext| events
	events -->|outputs| enrich
	enrich -->|–æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è| ctx
```

**–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:**
- Middleware –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ (`screenDef`) –∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (`ctx`)
- –†–µ–Ω–¥–µ—Ä–µ—Ä –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç snapshot –≤ –∫–∞–∂–¥—ã–π –≤–∏–¥–∂–µ—Ç —Å —Ñ–ª–∞–≥–æ–º `consumesContext`
- –í–∏–¥–∂–µ—Ç—ã —Å `producesContext` –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ Event Dispatcher
- Middleware –æ–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç, –≤—ã–±–∏—Ä–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π —É–∑–µ–ª –≥—Ä–∞—Ñ–∞ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π snapshot

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```
src/
‚îú‚îÄ‚îÄ context/
‚îÇ   ‚îî‚îÄ‚îÄ VirtualContext.jsx           # –ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (—Ä–µ–¥—å—é—Å–µ—Ä, actions, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îî‚îÄ‚îÄ analytics/                   # –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
‚îÇ       ‚îú‚îÄ‚îÄ analyticsStore.js        # –•—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ–±—ã—Ç–∏–π —Å localStorage
‚îÇ       ‚îú‚îÄ‚îÄ AnalyticsProvider.jsx    # React provider
‚îÇ       ‚îú‚îÄ‚îÄ useAnalytics.js          # –•—É–∫–∏ –¥–ª—è —Ç—Ä–µ–∫–∏–Ω–≥–∞
‚îÇ       ‚îî‚îÄ‚îÄ analyticsSelectors.js    # –ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–ª—è dashboard
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ Layout/                      # Layout –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Header, Sidebar)
‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îú‚îÄ‚îÄ ProductList/                 # Dashboard —Å grid/table –ø—Ä–æ–¥—É–∫—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ ProductOverview/             # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏ –≥—Ä–∞—Ñ —ç–∫—Ä–∞–Ω–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ ScreenEditor/                # Flow editor –Ω–∞ React Flow
‚îÇ   ‚îú‚îÄ‚îÄ ScreenBuilder/               # UI builder —Å drag-and-drop
‚îÇ   ‚îú‚îÄ‚îÄ Sandbox/                     # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —Å—Ä–µ–¥–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SandboxPage.jsx          # –û—Å–Ω–æ–≤–Ω–æ–π UI –ø–µ—Å–æ—á–Ω–∏—Ü—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ApiSandboxRunner.jsx     # API-—Ä–µ–∂–∏–º —Å fetch
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SandboxScreenRenderer.jsx # –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —ç–∫—Ä–∞–Ω–æ–≤ –∏–∑ JSON
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ data/                    # –î–µ–º–æ-–ø—Ä–µ—Å–µ—Ç—ã (avitoDemo, ecommerceDashboard)
‚îÇ   ‚îî‚îÄ‚îÄ Analytics/                   # –î–∞—à–±–æ—Ä–¥ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ —Å Recharts
‚îú‚îÄ‚îÄ styles/
‚îÇ   ‚îú‚îÄ‚îÄ designTokens.json            # –û–±—â–∏–µ —Ç–æ–∫–µ–Ω—ã –¥–ª—è React + Compose
‚îÇ   ‚îú‚îÄ‚îÄ applyDesignTokens.js         # Runtime helper –¥–ª—è CSS variables
‚îÇ   ‚îú‚îÄ‚îÄ widgetStyles.json            # –ü—Ä–µ—Å–µ—Ç—ã —Å—Ç–∏–ª–µ–π –≤–∏–¥–∂–µ—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ resolveWidgetStyles.js       # –ú–µ—Ä–¥–∂–∏–Ω–≥ base/variant/size
‚îî‚îÄ‚îÄ App.jsx                          # –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∏ context providers
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **Node.js** ‚â• 20.19.0
- **npm** ‚â• 10.9.0

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repository-url>
cd TeST

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –ó–∞–ø—É—Å—Ç–∏—Ç—å dev-—Å–µ—Ä–≤–µ—Ä
npm run dev
# ‚Üí http://localhost:5173

# Production build
npm run build

# –ü—Ä–µ–≤—å—é production —Å–±–æ—Ä–∫–∏
npm run preview
```

### –ó–∞–ø—É—Å–∫ Sandbox API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**JavaScript backend:**
```bash
npm run sandbox:server
# ‚Üí http://localhost:5050
# –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è: SANDBOX_PRESET=avitoDemo (default) –∏–ª–∏ ecommerceDashboard
```

**Python backend (FastAPI):**
```bash
cd server
pip install -r requirements.txt
uvicorn main:app --reload
# ‚Üí http://localhost:8000
```

### Component Playground (Ladle)

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å Ladle playground
npm run playground
# ‚Üí http://localhost:61000

# –°–æ–±—Ä–∞—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π playground
npm run playground:build
```

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤

- `src/pages/Sandbox/data/avitoDemo.json` ‚Äî –¥–µ–º–æ –∫–æ—Ä–∑–∏–Ω—ã Avito (Priority 1.2)
- `src/pages/Sandbox/data/ecommerceDashboard.json` ‚Äî email-–≤–∞–ª–∏–¥–∞—Ü–∏—è —Å —É—Å–ª–æ–≤–∏—è–º–∏
- `src/pages/Sandbox/data/legacyScreens.json` ‚Äî legacy —Ñ–æ—Ä–º–∞—Ç –¥–ª—è backward compatibility

### Design Tokens & Styles

- `src/styles/designTokens.json` ‚Äî –∞—Ç–æ–º–∞—Ä–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã (colors, spacing, radius, shadows, typography)
- `src/styles/widgetStyles.json` ‚Äî –∫–æ–º–ø–æ–∑–∏—Ç–Ω—ã–µ –ø—Ä–µ—Å–µ—Ç—ã –≤–∏–¥–∂–µ—Ç–æ–≤ (button, input, text, list, chart)

### –°–µ—Ä–≤–µ—Ä—ã

- `server/js/server.js` ‚Äî Express API –¥–ª—è /api/start, /api/action (—á–∏—Ç–∞–µ—Ç SANDBOX_PRESET)
- `server/main.py` ‚Äî FastAPI –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ —Å `sandbox_flow.py` –∏ `bindings.py`

## üìä –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–ú–æ–¥—É–ª–∏:**
- `analyticsStore.js` ‚Äî –∫–ª–∞—Å—Å AnalyticsStore —Å –º–µ—Ç–æ–¥–∞–º–∏ `logEvent`, `startTimer`, `stopTimer`, `subscribe`, `clear`
- `AnalyticsProvider.jsx` ‚Äî React provider —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∏ –º–µ—Ç–æ–¥–∞–º–∏ `trackScreenView`, `trackClick`, `finalizeScreenTiming`
- `useAnalytics.js` / `useAnalyticsOptional.js` ‚Äî —Ö—É–∫–∏ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (—Å—Ç—Ä–æ–≥–∏–π / —Å fallback)
- `analyticsSelectors.js` ‚Äî —Ñ—É–Ω–∫—Ü–∏—è `buildAnalyticsSummary` –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ —Å–æ–±—ã—Ç–∏–π –≤ dashboard-ready datasets
- `AnalyticsDashboard.jsx` ‚Äî UI —Å Recharts (LineChart, BarChart, —Ç–∞–±–ª–∏—Ü—ã, —Å–≤–æ–¥–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏)

**–°–æ–±—ã—Ç–∏—è:**
- `SCREEN_VIEW` ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä —ç–∫—Ä–∞–Ω–∞ (screenId, screenName, timestamp, duration)
- `UI_CLICK` ‚Äî –∫–ª–∏–∫ –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É (componentId, componentType, label, eventName)
- `INTERACTION_TIME` ‚Äî –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è (screenId, duration)
- `SESSION_START` ‚Äî –Ω–∞—á–∞–ª–æ —Å–µ–∞–Ω—Å–∞ (timestamp, sessionId)

**–•—Ä–∞–Ω–µ–Ω–∏–µ:**
- localStorage —Å –∫–ª—é—á–æ–º `bdui.analytics.events`
- TTL —Å–µ–∞–Ω—Å–∞: 6 —á–∞—Å–æ–≤ (SESSION_TTL_MS = 6 * 3600 * 1000)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —Å–æ–±—ã—Ç–∏–π –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
```jsx
// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –ø–µ—Å–æ—á–Ω–∏—Ü—ã
import { useAnalytics } from '@/services/analytics';

const { trackScreenView, trackClick, finalizeScreenTiming } = useAnalytics();

// –ü—Ä–∏ —Å–º–µ–Ω–µ —ç–∫—Ä–∞–Ω–∞
useEffect(() => {
  trackScreenView({ screenId, screenName, nodeId, productId });
  return () => finalizeScreenTiming('screen_effect_cleanup');
}, [screenId]);

// –ü—Ä–∏ –∫–ª–∏–∫–µ
const handleClick = (event) => {
  trackClick({ componentId, componentType, screenId, label, eventName });
};
```

**Dashboard:** –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –º–∞—Ä—à—Ä—É—Ç—É `/analytics` –≤ Sidebar ‚Üí Analytics (BarChart3 icon)

## üé≠ –î–µ–º–æ-—Å—Ü–µ–Ω–∞—Ä–∏–∏

### avitoDemo.json ‚Äî –ö–æ—Ä–∑–∏–Ω–∞ Avito

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Ñ–ª–æ—É –∫–æ—Ä–∑–∏–Ω—ã —Å –º–∞–≥–∞–∑–∏–Ω–∞–º–∏, —Ç–æ–≤–∞—Ä–∞–º–∏, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ –º–∞–∫–µ—Ç—É Figma).

**–≠–∫—Ä–∞–Ω—ã:**
- `screen-loading` ‚Äî –∑–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —ç–∫—Ä–∞–Ω —Å —Ç–µ–∫—Å—Ç–æ–º
- `screen-cart-main` ‚Äî –∫–æ—Ä–∑–∏–Ω–∞ —Å header (–≤—ã–±–æ—Ä –≤—Å–µ—Ö, —É–¥–∞–ª–∏—Ç—å N), body (—Å–ø–∏—Å–∫–∏ –º–∞–≥–∞–∑–∏–Ω–æ–≤ + upsell), footer (–∏—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞ + –∫–Ω–æ–ø–∫–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è)
- `screen-cart-empty` ‚Äî –ø—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–µ–π –∏ CTA "–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?"
- `screen-checkout` ‚Äî –∑–∞–≥–ª—É—à–∫–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:**
- `cart.items[]` ‚Äî —Ç–æ–≤–∞—Ä—ã (MagSafe Charger ‚ÇΩ4990, AirPods Pro 2 ‚ÇΩ15990, iPhone 15 Pro ‚ÇΩ99990)
- `stores[]` ‚Äî Pear Store (4.8‚òÖ), TECHNO ZONE (5.0‚òÖ)
- `recommendations[]` ‚Äî upsell-–±–ª–æ–∫ —Å —á–µ—Ö–ª–æ–º Premium ‚ÇΩ26551 -22%
- `ui.notifications` ‚Äî —Å–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (undo, success, info)

**–°–æ–±—ã—Ç–∏—è:** `loadComplete`, `incrementItem`, `decrementItem`, `removeItem`, `addRecommended`, `selectAll`, `clearAll`, `checkout`, `help`

**–ü–µ—Ä–µ—Ö–æ–¥ –∫ —ç–∫—Ä–∞–Ω—É:** `/sandbox` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç `demoProduct.js` ‚Üí `avitoDemo`)

### ecommerceDashboard.json ‚Äî Email –≤–∞–ª–∏–¥–∞—Ü–∏—è

**–û–ø–∏—Å–∞–Ω–∏–µ:** –§–ª–æ—É –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π email –∏ —É—Å–ª–æ–≤–Ω—ã–º–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∏–º–ø–æ—Ä—Ç –≤ `src/pages/Sandbox/data/demoProduct.js`:
```javascript
import ecommerceDashboard from './ecommerceDashboard.json';
export const demoProduct = ecommerceDashboard;
```

–ò–ª–∏ –¥–ª—è API-—Ä–µ–∂–∏–º–∞:
```bash
SANDBOX_PRESET=ecommerceDashboard npm run sandbox:server
```

## üé® Design Tokens & –ö—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–π —Å—Ç–∏–ª–∏–Ω–≥

### Where the tokens live

- **Source of truth:** `src/styles/designTokens.json`
- **Runtime helper:** `src/styles/applyDesignTokens.js`
	- `applyDesignTokens()` loads the JSON and exposes every token as a CSS custom property (e.g. `--colors-primary`).
	- `designTokens` and `getToken()` exports let you read raw values inside React components when you need numeric values instead of CSS variables.

### Using the tokens in React

```jsx
import { designTokens, getToken } from '../styles/applyDesignTokens.js' // adjust the path for your component

const Card = ({ children }) => (
	<div
		style={{
			borderRadius: getToken('radius.field'),
			boxShadow: getToken('shadows.md'),
			background: 'var(--colors-surface)'
		}}
	>
		{children}
	</div>
)
```

You can also use the CSS variables straight in stylesheets: `background: var(--colors-surface); padding: var(--spacing-lg);`.


### Using the tokens in Compose Multiplatform

Mobile app –¥–µ–∫–æ–¥–∏—Ä—É–µ—Ç JSON —Ç–æ–∫–µ–Ω—ã –≤ Kotlin data classes:

```kotlin
@Serializable
data class DesignTokens(val colors: Colors, val spacing: Spacing, /* ... */)

val tokens = remember {
	Json.decodeFromString<DesignTokens>(
		resources.openRawResource("designTokens.json").readBytes().decodeToString()
	)
}

val PrimaryColor = Color(tokens.colors.primary)
val PaddingLg = tokens.spacing.lg.dp

Surface(color = PrimaryColor) {
	Box(Modifier.padding(PaddingLg)) { /* content */ }
}
```

### Widget Styling Presets

`src/styles/widgetStyles.json` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –ø—Ä–µ—Å–µ—Ç—ã –¥–ª—è button, input, list, chart –∏ –¥—Ä—É–≥–∏—Ö –≤–∏–¥–∂–µ—Ç–æ–≤.

**React usage:**
```jsx
import { resolveWidgetStyles } from '../styles/resolveWidgetStyles.js';

const PrimaryButton = ({ label }) => {
	const { style } = resolveWidgetStyles('button', { variant: 'primary', size: 'medium' });
	return <button style={style}>{label}</button>;
};
```

**Compose usage:**
```kotlin
val button = widgetPresets.button.resolved("primary", size = "medium")
Button(
	onClick = {},
	colors = ButtonDefaults.buttonColors(backgroundColor = Color(button.backgroundColor)),
	shape = RoundedCornerShape(button.borderRadius.dp)
) { Text("Action", fontSize = button.fontSize.sp) }
```

## üì° API –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã

### REST API (Sandbox Servers)

**Endpoints:**
- `POST /api/start` ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞—á–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç
- `POST /api/action` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è (edgeId), –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ contextPatch, –≤–æ–∑–≤—Ä–∞—Ç —Å–ª–µ–¥—É—é—â–µ–≥–æ —ç–∫—Ä–∞–Ω–∞

**Request format (POST /api/action):**
```json
{
  "edgeId": "edge-increment-item",
  "context": { "cart": { "items": [...] } },
  "payload": { "itemId": "item-1" }
}
```

**Response format:**
```json
{
  "screen": { "id": "screen-cart-main", "sections": {...} },
  "context": { "cart": { "selectedCount": 3, "totalPrice": 125960 } },
  "nextNode": { "id": "cart-main", "type": "screen" }
}
```

### JSON Config Schemas

**Product schema:**
```typescript
interface Product {
  id: string;
  name: string;
  description: string;
  slug: string;
  variableSchemas: Record<string, VariableSchema>;
  initialContext: Record<string, any>;
  nodes: Node[];
  screens: Record<string, Screen>;
}
```

**Node schema:**
```typescript
interface Node {
  id: string;
  label: string;
  type: 'screen' | 'action' | 'condition';
  screenId?: string;  // –¥–ª—è type: 'screen'
  start?: boolean;    // —Å—Ç–∞—Ä—Ç–æ–≤—ã–π —É–∑–µ–ª
  edges: Edge[];
  data?: Record<string, any>;
}
```

**Edge schema:**
```typescript
interface Edge {
  id: string;
  label: string;
  event?: string;     // —Å–æ–±—ã—Ç–∏–µ –¥–ª—è —Ç—Ä–∏–≥–≥–µ—Ä–∞ (onClick, checkout, etc.)
  target: string;     // id —Ü–µ–ª–µ–≤–æ–≥–æ —É–∑–ª–∞
  summary?: string;
  contextPatch: Record<string, any>;  // –ø–ª–æ—Å–∫–∏–µ –ø—É—Ç–∏ (foo.bar.baz) –∏–ª–∏ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
}
```

**Screen schema (–Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç sections):**
```typescript
interface Screen {
  id: string;
  type: 'Screen';
  name: string;
  style: CSSProperties;
  sections: {
    header?: Section;
    body?: Section;
    footer?: Section;
  };
}

interface Section {
  id: string;
  type: 'Section';
  properties: {
    slot: 'header' | 'body' | 'footer';
    padding?: number;
    spacing?: number;
    alignItems?: string;
    justifyContent?: string;
  };
  style: CSSProperties;
  children: Component[];
}
```

**Component types:** `button`, `text`, `input`, `image`, `container`, `row`, `column`, `list`, `section`

### Binding Format

**Reference binding:**
```json
{
  "content": {
    "reference": "${cart.totalPrice}",
    "value": "120970"  // fallback
  }
}
```

**Iteration binding (lists):**
```json
{
  "items": {
    "reference": "${stores}",
    "value": []
  },
  "itemAlias": "store"  // –¥–æ—Å—Ç—É–ø–µ–Ω –∫–∞–∫ ${store.name}
}
```

**Resolver:** `src/pages/Sandbox/utils/bindings.js` ‚Üí `resolveBindingValue(binding, context, iterationStack)`

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit —Ç–µ—Å—Ç—ã

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ (Node.js test runner)
npm test

# –û—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏
npm test src/pages/Sandbox/utils/__tests__/bindings.test.js
npm test server/js/server.test.js
```

**–ü–æ–∫—Ä—ã—Ç–∏–µ:**
- ‚úÖ `bindings.js` ‚Äî resolveBindingValue, applyContextPatch, formatForDisplay
- ‚úÖ `server.js` ‚Äî /api/start, /api/action endpoints
- ‚è≥ **TODO:** VirtualContext reducer (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, UPDATE_NODE, ADD_EDGE, –∏–Ω—Ñ–µ—Ä–µ–Ω—Å —Ç–∏–ø–æ–≤)

### E2E —Ç–µ—Å—Ç—ã (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

**Playwright scenarios:**
1. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ ‚Üí –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ ‚Üí —Å–±–æ—Ä–∫–∞ UI ‚Üí –ø—Ä–µ–≤—å—é
2. –ù–∞–≤–∏–≥–∞—Ü–∏—è –≤ Sandbox ‚Üí –≤—ã–±–æ—Ä —É–∑–ª–∞ ‚Üí –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ edge ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ç—á–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
3. Analytics tracking ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É —ç–∫—Ä–∞–Ω–∞–º–∏ ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–±—ã—Ç–∏–π –≤ localStorage

### Contract —Ç–µ—Å—Ç—ã (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

**JSON schema validation:**
- –í–∞–ª–∏–¥–∞—Ü–∏—è `avitoDemo.json` / `ecommerceDashboard.json` –ø—Ä–æ—Ç–∏–≤ —Å—Ö–µ–º (Ajv / Zod)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è response /api/action –æ–∂–∏–¥–∞–µ–º–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ legacy `components` —Ñ–æ—Ä–º–∞—Ç–∞

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

```bash
# ESLint
npm run lint

# Debug logging (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
VITE_VC_TRACE=true npm run dev  # Frontend
VC_TRACE=true npm test           # Node tests

# –í –±—Ä–∞—É–∑–µ—Ä–µ
window.__VC_TRACE__ = true;
```

**Pre-existing lint errors:** 27 –æ—à–∏–±–æ–∫ –≤ `server/*`, `ScreenEditor`, `ScreenBuilder`, `VirtualContext` (–Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç —Ä–∞–±–æ—Ç—É)

## üöÄ Deployment

### Frontend (Vite build)

```bash
# Production —Å–±–æ—Ä–∫–∞
npm run build
# ‚Üí dist/

# –†–∞–∑–¥–∞—á–∞ —Å—Ç–∞—Ç–∏–∫–∏
npm run preview  # –∏–ª–∏ –ª—é–±–æ–π static server
```

**Environment variables (Vite):**
- `VITE_VC_TRACE` ‚Äî –≤–∫–ª—é—á–∏—Ç—å debug logging –¥–ª—è VirtualContext
- `VITE_API_BASE_URL` ‚Äî base URL –¥–ª—è Sandbox API (default: http://localhost:5050)

### Sandbox JS Server (Express)

```bash
npm run sandbox:server
```

**Environment variables:**
- `SANDBOX_API_PORT` ‚Äî –ø–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ (default: 5050)
- `SANDBOX_PRESET` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–µ—Å–µ—Ç–∞ (default: `avitoDemo`, –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: `ecommerceDashboard`)

**Production deployment:**
```bash
# –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ PM2
pm2 start server/js/server.js --name bdui-sandbox --env production

# –ò–ª–∏ —á–µ—Ä–µ–∑ systemd
sudo systemctl enable bdui-sandbox
sudo systemctl start bdui-sandbox
```

### Sandbox Python Server (FastAPI)

```bash
cd server
pip install -r requirements.txt
uvicorn main:app --host 0.0.0.0 --port 8000 --workers 4
```

**Production deployment:**
```bash
# Gunicorn + uvicorn workers
gunicorn server.main:app \
  --workers 4 \
  --worker-class uvicorn.workers.UvicornWorker \
  --bind 0.0.0.0:8000
```

**Environment variables:**
- `PYTHONPATH` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –∏–º–ø–æ—Ä—Ç–æ–≤
- `UVICORN_LOG_LEVEL` ‚Äî —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (info, debug, error)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

**CORS:** –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ CORS –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –∫ API
**HTTPS:** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ reverse proxy (nginx, Caddy) –¥–ª—è TLS
**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –ª–æ–≥–∏—Ä—É–π—Ç–µ —Å–æ–±—ã—Ç–∏—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –≤ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (Grafana, ELK)
**Rate Limiting:** –æ–≥—Ä–∞–Ω–∏—á—å—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –∫ /api/action –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∞–±—É–∑–∞

## üîÑ –†–∞–±–æ—á–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞

1. Navigate to **Product List** ‚Üí Click "New Product"
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (name, description, version)
3. –î–æ–±–∞–≤—å—Ç–µ —ç–∫—Ä–∞–Ω—ã –≤ **Product Overview**
4. –°–ø—Ä–æ–µ–∫—Ç–∏—Ä—É–π—Ç–µ –≥—Ä–∞—Ñ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –≤ **Screen Editor** (React Flow)
5. –°–æ–±–µ—Ä–∏—Ç–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ **Screen Builder** (drag-and-drop)
6. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤ **Sandbox** (offline –∏–ª–∏ API —Ä–µ–∂–∏–º)
7. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ JSON –∏–ª–∏ –∑–∞–¥–µ–ø–ª–æ–π—Ç–µ

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Virtual Context

1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ —ç–∫—Ä–∞–Ω–∞—Ö –∏–ª–∏ action-—É–∑–ª–∞—Ö (variableSchemas)
2. –°–≤—è–∂–∏—Ç–µ —Å–≤–æ–π—Å—Ç–≤–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —á–µ—Ä–µ–∑ `{ reference: "${path}" }`
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ conditional logic (condition nodes)
4. –ü—Ä–∏–º–µ–Ω—è–π—Ç–µ contextPatch –≤ edges –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
5. –û—Ç–ª–∞–∂–∏–≤–∞–π—Ç–µ —á–µ—Ä–µ–∑ context panel –≤ Sandbox

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Sandbox

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Sandbox** –∏–∑ Sidebar
2. –í—ã–±–µ—Ä–∏—Ç–µ —É–∑–µ–ª –≤ –≥—Ä–∞—Ñ–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —ç–∫—Ä–∞–Ω–∞
3. –ö–ª–∏–∫–∞–π—Ç–µ –ø–æ –∫–Ω–æ–ø–∫–∞–º –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è edge transitions
4. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ context panel
5. –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –∏—Å—Ç–æ—Ä–∏—é –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
6. –°–±—Ä–æ—Å—å—Ç–µ —Å—Ü–µ–Ω–∞—Ä–∏–π –∫–Ω–æ–ø–∫–æ–π "Reset"

### –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Analytics Dashboard** –∏–∑ Sidebar
2. –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ timeline –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (—Å–æ–±—ã—Ç–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏)
3. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —ç–∫—Ä–∞–Ω–æ–≤ (–ø—Ä–æ—Å–º–æ—Ç—Ä—ã, —Å—Ä–µ–¥–Ω—è—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
4. –ò–∑—É—á–∞–π—Ç–µ –∫–ª–∏–∫–∏ –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º (—á–∞—Å—Ç–æ—Ç–∞, —Ç–∏–ø—ã)
5. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Å–æ–±—ã—Ç–∏—è —á–µ—Ä–µ–∑ `window.localStorage.getItem('bdui.analytics.events')`

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

- **–î–∏–∞–≥—Ä–∞–º–º—ã:** `docs/` (context-schema, sandbox-sequence, widget-context-dataflow)
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:** `src/data/` (–≥—Ä–∞—Ñ—ã, —ç–∫—Ä–∞–Ω—ã, —à–∞–±–ª–æ–Ω—ã)
- **–•–∞–∫–∞—Ç–æ–Ω –ø–ª–∞–Ω:** `docs/hackathon-plan.md` (Priority 1-10 requirements)
- **API –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã:** —Å–º. —Ä–∞–∑–¥–µ–ª [API –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã](#-api-–∏-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã)
- **ADR:** `docs/adr/` (Architecture Decision Records) ‚Äî –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch (`git checkout -b feature/amazing-feature`)
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add amazing feature'`)
4. Push –≤ branch (`git push origin feature/amazing-feature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

**Code style:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ESLint (`npm run lint`)
- –°–ª–µ–¥—É–π—Ç–µ –∫–æ–Ω–≤–µ–Ω—Ü–∏—è–º –∏–∑ `.github/copilot-instructions.md`
- –î–æ–±–∞–≤–ª—è–π—Ç–µ JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö API
- –ü–æ–∫—Ä—ã–≤–∞–π—Ç–µ –Ω–æ–≤—ã–µ —Ñ–∏—á–∏ —Ç–µ—Å—Ç–∞–º–∏

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - see LICENSE file for details

## üë• –ö–æ–º–∞–Ω–¥–∞

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –≤ —Ä–∞–º–∫–∞—Ö —Ö–∞–∫–∞—Ç–æ–Ω–∞ –ê–≤–∏—Ç–æ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π BDUI –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.

---

**Built with ‚ù§Ô∏è using React, Vite, and modern web technologies**### Widget styling presets for React & Compose

On top of the atomic design tokens we now ship higher-level widget presets that capture the default look & feel of buttons, inputs, lists, charts, and more. They live in `src/styles/widgetStyles.json` and are consumed in React through `resolveWidgetStyles`.

#### React usage

```jsx
import { resolveWidgetStyles } from '../styles/resolveWidgetStyles.js'

const PrimaryButton = ({ label }) => {
	const { style } = resolveWidgetStyles('button', { variant: 'primary', size: 'medium' })

	return (
		<button className="canvas-button" style={style}>
			{label}
		</button>
	)
}
```

The helper merges base, size, and variant presets, exposes them both as regular inline React style props (`backgroundColor`, `fontSize`, etc.) and as CSS variables (`--widget-button-background-color`). The Screen Builder canvas and any custom component can reuse the very same contract by spreading `style` and adding extra overrides on top:

```jsx
const { style } = resolveWidgetStyles('input')
return <input className="canvas-input" style={{ ...style, width: 320 }} readOnly />
```

#### Compose usage

Compose can reuse the exact same JSON. Each widget entry is a plain serializable map, so you can decode it into data classes and map the fields to modifiers and theming primitives:

```kotlin
@Serializable data class WidgetStyles(
		val button: WidgetPreset,
		val input: WidgetPreset,
		// ...
)

val widgetPresets = remember {
		Json.decodeFromString<WidgetStyles>(
				resources.openRawResource("widgetStyles.json").readBytes().decodeToString()
		)
}

val button = widgetPresets.button.resolved("primary", size = "medium")
Button(
		onClick = {},
		colors = ButtonDefaults.buttonColors(backgroundColor = Color(button.backgroundColor)),
		shape = RoundedCornerShape(button.borderRadius.dp)
) {
		Text("Action", fontSize = button.fontSize.sp)
}
```

A thin Kotlin extension (e.g. `WidgetPreset.resolved()`) can perform the same base/variant/size merge that happens in React, so both platforms stay pixel-perfect without duplicating values. Keep the JSON alongside `designTokens.json` in your shared resources and re-run decoding whenever the bundle refreshes.

## ÔøΩÔ∏è –°—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –≤–∏–¥–∂–µ—Ç–æ–≤ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

<p align="center">
	<img src="./docs/widget-context-diagram.png" alt="–î–∏–∞–≥—Ä–∞–º–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –≤–∏–¥–∂–µ—Ç–æ–≤ –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞" width="720" />
</p>

### –î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

<p align="center">
	<img src="./docs/widget-context-sequence.png" alt="–î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏ —ç–∫—Ä–∞–Ω–∞" width="720" />
</p>

### –î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö

<p align="center">
	<img src="./docs/widget-context-dataflow.png" alt="–î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã" width="720" />
</p>

```mermaid
flowchart LR
	subgraph Backend
		ctx[(Virtual Context
		–∑–Ω–∞—á–µ–Ω–∏—è)]
		screenDef[Screen Definition
		+ Widget Props]
		enrich[[–°–µ—Ä–≤–∏—Å –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏]]
	end

	subgraph Frontend / Runtime
		renderer[–ö–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –¥–µ—Ä–µ–≤–æ —ç–∫—Ä–∞–Ω–∞]
		widgets{{–í–∏–¥–∂–µ—Ç—ã
		(capabilities)}}
		events[[Event Dispatcher]]
	end

	ctx --> enrich
	screenDef --> enrich
	enrich -->|contextSnapshot| renderer
	renderer --> widgets
	widgets -->|consumesContext=true|
		renderer
	widgets -->|producesContext=true|
		events
	events -->|outputs| enrich
	enrich -->|–æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è|
		ctx
```

**–ö–∞–∫ —á–∏—Ç–∞—Ç—å —Å—Ö–µ–º—É:**

- –ú–∏–¥–¥–ª-–±–µ–∫ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ (`screenDef`) –∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (`ctx`), –∞ —Ç–∞–∫–∂–µ —Å–≤–µ—Ä—è–µ—Ç—Å—è —Å –≥—Ä–∞—Ñ–æ–º –ø—Ä–æ–¥—É–∫—Ç–∞, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π —ç–∫—Ä–∞–Ω.
- –†–µ–Ω–¥–µ—Ä–µ—Ä –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—Å—è –ø–æ –¥–µ—Ä–µ–≤—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–Ω–∞–ø—à–æ—Ç –≤ –∫–∞–∂–¥—ã–π –≤–∏–¥–∂–µ—Ç —Å —Ñ–ª–∞–≥–æ–º `consumesContext`.
- –í–∏–¥–∂–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç –¥–∞–Ω–Ω—ã–µ (`producesContext`), –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π `Event Dispatcher`.
- –ú–∏–¥–¥–ª-–±–µ–∫ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `outputs`, –æ–±–Ω–æ–≤–ª—è–µ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç, –≤—ã–±–∏—Ä–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π —É–∑–µ–ª –≥—Ä–∞—Ñ–∞ –∏ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º —Ä–µ–Ω–¥–µ—Ä–µ —Å–Ω–æ–≤–∞ –æ—Ç–¥–∞—ë—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π —Å–Ω–∞–ø—à–æ—Ç.

–¢–∞–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —è–≤–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å, –∫–∞–∫–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Ç–æ–ª—å–∫–æ —á–∏—Ç–∞—é—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç, –∫–∞–∫–∏–µ –ø–∏—à—É—Ç –æ–±—Ä–∞—Ç–Ω–æ, –∏ –∫–∞–∫ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏ –ø–æ —ç–∫—Ä–∞–Ω—É.

## ÔøΩüîß Technical Stack

### Core Technologies
- **React 19.1.1**: UI framework
- **Vite**: Build tool and development server
- **React Router DOM**: Client-side routing
- **@xyflow/react**: Visual flow editor
- **React DnD**: Drag-and-drop functionality
- **React Hot Toast**: Notification system
- **Lucide React**: Icon library

### Development Tools
- **ESLint**: Code linting
- **CSS Modules**: Scoped styling
- **Hot Reload**: Instant development feedback

## üìã User Workflows

### Creating a New Product
1. Navigate to Product List
2. Click "New Product" button
3. Enter product metadata (name, description, version)
4. Add screens using the overview interface
5. Design screen flows in the Flow Editor
6. Build UI components in the Screen Builder
7. Test and preview the complete product
8. Export or deploy the finished product

### Managing Virtual Context
1. Define variables in any screen or action
2. Bind component properties to variables
3. Use variables in conditional logic
4. Share data between screens seamlessly
5. Debug variable flow using the context panel

### Testing in Sandbox
1. Navigate to Sandbox from the sidebar
2. Select a node in the graph to view its screen
3. Click transition buttons to apply context patches
4. Monitor variable changes in the context panel
5. Review transition history for debugging
6. Reset scenario to start over

## üéØ Key Features in Detail

### Virtual Context Management
- **Variable Types**: String, number, boolean, object, array
- **Sources**: User input, API responses, manual entry, calculations
- **Binding**: Two-way data binding between components and variables
- **Persistence**: Variables maintained across screen transitions
- **Debugging**: Real-time variable inspection and modification

### Flow Editor Capabilities
- **Node Types**: Screen nodes, action nodes (API, validation, condition)
- **Connections**: Configurable triggers (onClick, onSubmit, onSuccess, onError)
- **Validation**: Real-time error detection and flow validation
- **Export**: JSON export for deployment or backup
- **Undo/Redo**: Complete history management

### UI Builder Features
- **Component Palette**: Buttons, inputs, text, containers, images, lists, charts
- **Styling**: Visual property editor with real-time preview
- **Events**: Component event handling and screen transitions
- **Responsive**: Mobile-first responsive design tools
- **Data Binding**: Connect components to virtual context variables

### Sandbox Environment
- **Interactive Graph Navigation**: Click nodes to switch screens instantly
- **Context Simulation**: Apply patches to test variable changes
- **Transition History**: Track all state changes with timestamps
- **Real-time Rendering**: See UI updates as context evolves
- **Demo Products**: Pre-built examples like checkout flows for testing

---

**Built with ‚ù§Ô∏è using React, Vite, and modern web technologies**
